# 点群データビューア (React版)

Three.jsを使用した点群データの3D表示アプリケーションのReact版です。LASファイルとPLYファイルの両方に対応しています。

## 機能

- **LASファイル対応**: 標準的な点群データ形式（LAS）を直接読み込み
- **PLYファイル対応**: PLY形式の点群データを読み込み
- **3D表示**: Three.jsを使用した高品質な3D表示
- **インタラクティブ操作**: マウスによる回転、ズーム、パン操作
- **表示設定**: 点のサイズ、透明度、色情報の切り替え
- **情報表示**: 点群数、範囲などの詳細情報を表示
- **Reactコンポーネント**: モジュラーで保守しやすいコンポーネント設計

## 使用方法

### 1. アプリケーションの起動

```bash
# 依存関係をインストール
npm install

# 開発サーバーを起動
npm run dev
```

### 2. 点群データの読み込み

1. 「点群データを読み込み」ボタンをクリック
2. LASファイルまたはPLYファイルを選択
3. 自動的に点群データが読み込まれます

### 3. 表示操作

- **回転**: マウス左ボタンでドラッグ
- **ズーム**: マウスホイール
- **パン**: マウス右ボタンでドラッグ

### 4. 表示設定

- **点のサイズ**: スライダーで調整（0.001〜0.1）
- **透明度**: スライダーで調整（0.1〜1.0）
- **色情報の切り替え**: ボタンで色情報の表示/非表示を切り替え

## 対応ファイル形式

### LASファイル
- 標準的な点群データ形式
- 位置情報（X, Y, Z）と色情報（R, G, B）をサポート
- 大容量ファイルにも対応

### PLYファイル
- 一般的な3Dモデル形式
- 色情報付きの点群データをサポート

## プロジェクト構造

```
src/
├── components/
│   ├── PointCloudViewer.js    # メインの3Dビューアコンポーネント
│   ├── FileUpload.js          # ファイルアップロードコンポーネント
│   ├── ControlsPanel.js       # 表示設定コントロールパネル
│   └── InfoPanel.js           # 点群情報表示パネル
├── App.js                     # メインアプリケーションコンポーネント
└── index.js                   # アプリケーションエントリーポイント
```

## 技術仕様

- **フロントエンド**: React 18, HTML5, CSS3, JavaScript (ES6+)
- **3Dライブラリ**: Three.js
- **ビルドツール**: Webpack, Babel
- **LASファイル読み込み**: 独自実装のLASパーサー
- **PLYファイル読み込み**: Three.js PLYLoader
- **カメラ制御**: Three.js OrbitControls

## ブラウザ対応

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 注意事項

- 大容量の点群データを読み込む際は、ブラウザのメモリ使用量にご注意ください
- 一部の古いブラウザでは正常に動作しない場合があります
- React版では、コンポーネントベースの設計により、コードの保守性が向上しています

## ライセンス

MIT License

大規模データの表示最適化が完了しました！
実装した最適化機能
✅ 品質レベルシステム
4段階の品質レベル（最高品質〜低品質）
各レベルで異なる点数制限とサンプリング間隔
✅ プログレッシブ読み込み
品質レベルに応じた適応的な点数制限
サンプリング間隔の調整（1点ごと〜10点に1点）
✅ LOD（Level of Detail）システム
最高品質: 100万点（1点ごと）
高品質: 50万点（2点に1点）
中品質: 25万点（4点に1点）
低品質: 10万点（10点に1点）
✅ ユーザーインターフェース
品質レベル調整スライダー
リアルタイム品質表示
使用方法
アプリケーションを起動
大規模データの読み込み
05qf13204d.lasファイルを読み込み
初期は最高品質（100万点）で読み込まれます
品質レベルの調整
コントロールパネルの「品質レベル」スライダーを使用
ブラウザが重い場合は低品質に設定
詳細が必要な場合は最高品質に設定
最適化の効果
メモリ使用量の削減: 品質レベルに応じて最大90%のメモリ削減
レンダリング性能の向上: 点数を制限することでフレームレート向上
ユーザー体験の改善: 滑らかな操作と適応的な品質調整
これで、大規模な点群データでもブラウザが固まることなく、適切な品質で表示できるようになりました。必要に応じて品質レベルを調整して、パフォーマンスと品質のバランスを取ることができます。